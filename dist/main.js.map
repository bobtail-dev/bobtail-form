{"version":3,"sources":["../src/main.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;oBAOe,UAAU,OAAV,EAA8C;AAAA,QAA3B,aAA2B,uEAAb,EAAa;AAAA,QAAT,GAAS,uEAAL,GAAK;;AAC3D,QAAI,OAAO,8BAAa,EAAb,CAAX;AACA,QAAI,QAAQ,QAAQ,IAAR,CAAZ;;AAEA,QAAI,UAAU,sBAAE,MAAM,CAAN,CAAF,CAAd;AACA,QAAI,IAAI,qBAAE,QAAF,CAAW;AAAA,aAAM,4BAAY;AAAA,eAAM,qBAAK;AAAA,iBAAM,KAAK,IAAL,GAAY,QAAQ,aAAR,CAAsB,aAAtB,CAAlB;AAAA,SAAL,CAAN;AAAA,OAAZ,CAAN;AAAA,KAAX,EAAkG,GAAlG,CAAR;;AAEA;AACA,kCAAoB;AAClB,gBAAU,CADQ;AAElB,gBAAU,MAAM,CAAN,CAFQ;AAGlB,eAAS,CACP,EAAC,SAAS,yBAAV,EADO,EAEP,EAAC,WAAW,OAAZ,EAFO,EAGP,EAAC,WAAW,UAAZ,EAHO,EAIP,EAAC,WAAW,SAAZ,EAJO,EAKP,EAAC,WAAW,MAAZ,EALO;AAHS,KAApB;;AAYA,YAAQ,EAAR,CAAW,QAAX,EAAqB,yBAArB,EAAgD,CAAhD;AACA,WAAO,EAAC,YAAD,EAAQ,UAAR,EAAP;AACD,G;;;;;;;;;;;;;;AAAA","file":"main.js","sourcesContent":["import $ from 'jquery';\nimport _ from 'underscore';\nimport {transaction, snap} from 'bobtail-rx';\nimport 'jquery-serializejson';\nimport {JsonCell} from 'bobtail-json-cell';\nimport MutationSummary from 'mutation-summary';\n\nexport default function ($formFn, serializeOpts={}, lag=100) {\n  let cell = new JsonCell({});\n  let $form = $formFn(cell);\n\n  let $target = $($form[0]);\n  let s = _.debounce(() => transaction(() => snap(() => cell.data = $target.serializeJSON(serializeOpts))), lag);\n\n  s();\n  new MutationSummary({\n    callback: s,\n    rootNode: $form[0],\n    queries: [\n      {element: 'input, select, textarea'},\n      {attribute: 'value'},\n      {attribute: 'selected'},\n      {attribute: 'checked'},\n      {attribute: 'name'}\n    ]\n  });\n\n  $target.on('change', 'input, select, textarea', s);\n  return {$form, cell};\n};"]}