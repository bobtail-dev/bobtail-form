{"version":3,"sources":["../src/main.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;oBAMe,UAAU,OAAV,EAA8C;AAAA,QAA3B,aAA2B,uEAAb,EAAa;AAAA,QAAT,GAAS,uEAAL,GAAK;;AAC3D,QAAI,OAAO,8BAAa,EAAb,CAAX;AACA,QAAI,QAAQ,QAAQ,IAAR,CAAZ;;AAEA,QAAI,UAAU,sBAAE,MAAM,CAAN,CAAF,CAAd;AACA,QAAI,IAAI,qBAAE,QAAF,CAAW;AAAA,aAAM,GAAG,WAAH,CAAe;AAAA,eAAM,GAAG,IAAH,CAAQ;AAAA,iBAAM,KAAK,IAAL,GAAY,QAAQ,aAAR,CAAsB,aAAtB,CAAlB;AAAA,SAAR,CAAN;AAAA,OAAf,CAAN;AAAA,KAAX,EAAwG,GAAxG,CAAR;;AAEA;AACA,kCAAoB;AAClB,gBAAU,CADQ;AAElB,gBAAU,MAAM,CAAN,CAFQ;AAGlB,eAAS,CACP,EAAC,SAAS,yBAAV,EADO,EAEP,EAAC,WAAW,OAAZ,EAFO,EAGP,EAAC,WAAW,UAAZ,EAHO,EAIP,EAAC,WAAW,SAAZ,EAJO,EAKP,EAAC,WAAW,MAAZ,EALO;AAHS,KAApB;;AAYA,YAAQ,EAAR,CAAW,QAAX,EAAqB,yBAArB,EAAgD,CAAhD;AACA,WAAO,EAAC,YAAD,EAAQ,UAAR,EAAP;AACD,G","file":"main.js","sourcesContent":["import $ from 'jquery';\r\nimport _ from 'underscore';\r\nimport {transaction, snap} from 'bobtail-rx';\r\nimport 'jquery-serializejson';\r\nimport {JsonCell} from 'bobtail-json-cell';\r\nimport MutationSummary from 'mutation-summary';\r\nexport default function ($formFn, serializeOpts={}, lag=100) {\r\n  let cell = new JsonCell({});\r\n  let $form = $formFn(cell);\r\n\r\n  let $target = $($form[0]);\r\n  let s = _.debounce(() => rx.transaction(() => rx.snap(() => cell.data = $target.serializeJSON(serializeOpts))), lag);\r\n\r\n  s();\r\n  new MutationSummary({\r\n    callback: s,\r\n    rootNode: $form[0],\r\n    queries: [\r\n      {element: 'input, select, textarea'},\r\n      {attribute: 'value'},\r\n      {attribute: 'selected'},\r\n      {attribute: 'checked'},\r\n      {attribute: 'name'}\r\n    ]\r\n  });\r\n\r\n  $target.on('change', 'input, select, textarea', s);\r\n  return {$form, cell};\r\n}"]}