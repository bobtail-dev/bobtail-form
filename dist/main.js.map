{"version":3,"sources":["../src/main.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;oBAOe,UAAU,OAAV,QAAkD;AAAA,QAA9B,OAA8B,QAA9B,OAA8B;AAAA,QAArB,aAAqB,QAArB,aAAqB;AAAA,QAAN,GAAM,QAAN,GAAM;;AAC/D,QAAI,OAAO,IAAI,QAAJ,CAAa,EAAb,CAAX;AACA,QAAI,QAAQ,QAAQ,IAAR,EAAc,OAAd,CAAZ;;AAEA,QAAI,UAAU,sBAAE,MAAM,CAAN,CAAF,CAAd;AACA,QAAI,IAAI,qBAAE,QAAF,CAAW;AAAA,aAAM,4BAAY;AAAA,eAAM,qBAAK;AAAA,iBAAM,KAAK,IAAL,GAAY,QAAQ,aAAR,CAAsB,aAAtB,CAAlB;AAAA,SAAL,CAAN;AAAA,OAAZ,CAAN;AAAA,KAAX,EAAkG,GAAlG,CAAR;;AAEA;AACA,kCAAoB;AAClB,gBAAU,CADQ;AAElB,gBAAU,MAAM,CAAN,CAFQ;AAGlB,eAAS,CACP,EAAC,SAAS,yBAAV,EADO,EAEP,EAAC,WAAW,OAAZ,EAFO,EAGP,EAAC,WAAW,UAAZ,EAHO,EAIP,EAAC,WAAW,SAAZ,EAJO,EAKP,EAAC,WAAW,MAAZ,EALO;AAHS,KAApB;;AAYA,YAAQ,EAAR,CAAW,QAAX,EAAqB,yBAArB,EAAgD,CAAhD;AACA,WAAO,EAAC,YAAD,EAAQ,UAAR,EAAP;AACD,G","file":"main.js","sourcesContent":["import $ from 'jquery';\r\nimport _ from 'underscore';\r\nimport {transaction, snap} from 'bobtail-rx';\r\nimport 'jquery-serializejson';\r\nimport {JsonCell} from 'bobtail-json-cell';\r\nimport MutationSummary from 'mutation-summary';\r\n\r\nexport default function ($formFn, {initial, serializeOpts, lag}) {\r\n  let cell = new DeepCell({});\r\n  let $form = $formFn(cell, initial);\r\n\r\n  let $target = $($form[0]);\r\n  let s = _.debounce(() => transaction(() => snap(() => cell.data = $target.serializeJSON(serializeOpts))), lag);\r\n\r\n  s();\r\n  new MutationSummary({\r\n    callback: s,\r\n    rootNode: $form[0],\r\n    queries: [\r\n      {element: 'input, select, textarea'},\r\n      {attribute: 'value'},\r\n      {attribute: 'selected'},\r\n      {attribute: 'checked'},\r\n      {attribute: 'name'}\r\n    ]\r\n  });\r\n\r\n  $target.on('change', 'input, select, textarea', s);\r\n  return {$form, cell};\r\n}\r\n"]}